<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='../static/css/images/logo.png') }}">
    <title>Course Information</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='../static/css/edprovider_style.css') }}">
    <script src="{{ url_for('static', filename='../static/js/edprovider.js') }}"></script>
</head>
<body>
    <header>
        <nav>
            <div class="navi_menu">
                <a class="active" href="index.html"><strong>Home</strong></a>
                <a class="active" href="{{ url_for('edprovider.edproviderlanding') }}" class="view-courses-btn">Add Course</a>
            </div>
        </nav>
    </header>

    <div class="container">
        <form action="{{ url_for('edprovider.search_courses') }}" method="POST" class="search-container">
            <input type="text" name="search_query" placeholder="Search by Course Name or Industry" value="{{ search_query }}">
            <button type="submit">Search</button>
        </form>
    </div>

    <div class="container">
        <h2>Course Information</h2>
        <table>
            <thead>
                <tr>
                    <th>Industry</th>
                    <th>Course Name</th>
                    <th>Course Type</th>
                    <th>Duration</th>
                    <th>Course Structure</th>
                    <th>Key Learnings</th>
                    <th>Cost (AUD)</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for course in courses %}
                <tr id="course-row-{{ course._id }}">
                    <td>{{ course.Industry }}</td>
                    <td>{{ course.CourseName }}</td>
                    <td>{{ course.CourseType }}</td>
                    <td>{{ course.Duration }}</td>
                    <td>{{ course.CourseStructure }}</td>
                    <td>{{ course.KeyLearnings }}</td>
                    <td>${{ "%.2f"|format(course.get('Cost', 0.00)) }}</td>
                    <td>
                        <div class="button-container">
                            <button type="button" class="form-button modify-button" data-course-id="{{ course._id }}">Modify</button>
                            <button type="button" class="form-button delete-button" data-course-id="{{ course._id }}">Delete</button>
                        </div>
                    </td>                   
                </tr>
                
                <!-- Hidden edit form when modifying -->
                <tr id="edit-row-{{ course._id }}" style="display:none;">
                    <td colspan="7">
                        <form id="edit-course-form-{{ course._id }}" class="edit-course-form" data-course-id="{{ course._id }}">
                            <!-- Populate the form with course details for editing -->
                            <select id="industry" name="industry" class="form-select" required>
                                <option value="Engineering" {% if course.Industry == 'Engineering' %}selected{% endif %}>Engineering</option>
                                <option value="Community and Personal Care" {% if course.Industry == 'Community and Personal Care' %}selected{% endif %}>Community and Personal Care</option>
                                <!-- Other options... -->
                            </select>

                            <!-- Course Name -->
                            <select id="course_name" name="course_name" class="form-select" required>
                                <option value="Sociology, Psychology" {% if course.CourseName == 'Sociology, Psychology' %}selected{% endif %}>Sociology, Psychology</option>
                                <!-- Add more course names here -->
                            </select>

                            <!-- Course Type -->
                            <select id="course_type" name="course_type" class="form-select" required>
                                <option value="Bachelors" {% if course.CourseType == 'Bachelors' %}selected{% endif %}>Bachelors</option>
                                <option value="Diploma" {% if course.CourseType == 'Diploma' %}selected{% endif %}>Diploma</option>
                                <!-- Add other course types -->
                            </select>

                            <!-- Duration -->
                            <select id="duration" name="duration" class="form-select" required>
                                <option value="1 year" {% if course.Duration == '1 year' %}selected{% endif %}>1 year</option>
                                <!-- Add other durations -->
                            </select>

                            <!-- Course Structure -->
                            <textarea name="course_structure" class="form-input" required>{{ course.CourseStructure }}</textarea>

                            <!-- Key Learnings -->
                            <textarea name="key_learnings" class="form-input" required>{{ course.KeyLearnings }}</textarea>

                            <!-- Cost Field -->
                            <label for="cost">Cost (AUD)</label>
                            <input type="number" id="cost" name="cost" class="form-input" value="{{ course.get('Cost', 0.00) }}" required min="0" step="0.01">

                            <button type="submit" class="form-button">Save Changes</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- Pagination Controls -->
    <div class="pagination">
        <ul style="list-style-type:none; display:flex; justify-content: center; align-items: center;">
            {% if page > 1 %}
            <li style="margin-right:10px;">
                <a href="{{ url_for('edprovider.view_courses', page=page-1) }}" class="pagination-arrow">&laquo;</a>
            </li>
            {% endif %}
            {% for num in range(1, total_pages + 1) %}
            {% if num == page %}
            <li style="margin-right:10px;">
                <span class="current-page">{{ num }}</span>
            </li>
            {% else %}
            <li style="margin-right:10px;">
                <a href="{{ url_for('edprovider.view_courses', page=num) }}" class="pagination-number">{{ num }}</a>
            </li>
            {% endif %}
            {% endfor %}
            {% if page < total_pages %}
            <li style="margin-left:10px;">
                <a href="{{ url_for('edprovider.view_courses', page=page+1) }}" class="pagination-arrow">&raquo;</a>
            </li>
            {% endif %}
        </ul>
    </div>

    <div class="container">
        <a href="{{ url_for('edprovider.edproviderlanding') }}" class="form-button">Back to Add Course</a>
    </div>
</body>
</html>
